{% extends 'common/superuser/common.html' %}

{% block title %}
  Dashboard
{% endblock %}

{% block content %}
  <div class="container-fluid py-4">
    <!-- {% comment %} Top cards {% endcomment %} -->
    <div class="row">
      <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Today's sales</p>
                  <h5 class="font-weight-bolder">₹ {% if todays_sales.sum %}{{ todays_sales.sum }} {% else %} 0{% endif %}</h5>
                </div>
              </div>
              <div class="col-4 d-flex justify-content-end">
                <div class="icon icon-shape bg-gradient-primary shadow-primary text-light d-flex justify-content-center align-items-center text-center rounded-circle">
                  <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-cash-coin" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8m5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0" />
                    <path d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195z" />
                    <path d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083q.088-.517.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1z" />
                    <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 6 6 0 0 1 3.13-1.567" />
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Employees</p>
                  <h5 class="font-weight-bolder">{{ total_emp }}</h5>
                </div>
              </div>
              <div class="col-4 d-flex justify-content-end">
                <div class="icon icon-shape bg-gradient-danger shadow-primary text-light d-flex justify-content-center align-items-center text-center rounded-circle">
                  <svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" viewBox="0 0 36 36">
                    <g id="clarityEmployeeSolid0" fill="currentColor">
                      <circle cx="16.86" cy="9.73" r="6.46" />
                      <path d="M21 28h7v1.4h-7z" />
                      <path d="M15 30v3a1 1 0 0 0 1 1h17a1 1 0 0 0 1-1V23a1 1 0 0 0-1-1h-7v-1.47a1 1 0 0 0-2 0V22h-2v-3.58a32.12 32.12 0 0 0-5.14-.42a26 26 0 0 0-11 2.39a3.28 3.28 0 0 0-1.88 3V30Zm17 2H17v-8h7v.42a1 1 0 0 0 2 0V24h6Z" />
                    </g>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Leads</p>
                  <h5 class="font-weight-bolder">{{ total_lead }}</h5>
                  {% comment %} <p class="mb-0">
                    <span class="text-danger text-sm font-weight-bolder">-2%</span>
                    since last quarter
                  </p> {% endcomment %}
                </div>
              </div>
              <div class="col-4 d-flex justify-content-end">
                <div class="icon icon-shape bg-gradient-warning shadow-primary text-light d-flex justify-content-center align-items-center text-center rounded-circle">
                  <svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M4.577 20q-.343 0-.576-.232q-.232-.232-.232-.576v-8.376q0-.356.232-.586q.233-.23.576-.23h2.538q.344 0 .576.232q.232.232.232.576v8.376q0 .356-.232.586q-.232.23-.576.23H4.577Zm5.968 0q-.355 0-.584-.232q-.23-.232-.23-.576V4.808q0-.344.232-.576q.232-.232.575-.232h2.917q.355 0 .584.232q.23.232.23.576v14.384q0 .344-.232.576q-.232.232-.575.232h-2.917Zm6.34 0q-.344 0-.576-.23q-.232-.23-.232-.57v-6.4q0-.34.232-.57q.232-.23.576-.23h2.538q.343 0 .576.23q.232.23.232.57v6.4q0 .34-.232.57q-.233.23-.576.23h-2.538Z" />
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-sm-6">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Sales</p>
                  <h5 class="font-weight-bolder">₹ {{ total_sales.sum }}</h5>
                </div>
              </div>
              <div class="col-4 d-flex justify-content-end">
                <div class="icon icon-shape bg-gradient-success shadow-primary text-light d-flex justify-content-center align-items-center text-center rounded-circle">
                  <svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" viewBox="0 0 1024 1023">
                    <path fill="currentColor" d="M998 1023h-64q-14 0-25-9.5T895 991l-44-224H467l44 224q3 13-4.5 22.5T485 1023h-64q-13 0-24-9.5T383 991L193 32q-3-14 4.5-23T219 0h586q12 0 19 7.5t7 18.5q0 1 1 2.5t1 2.5l190 960q3 13-4.5 22.5T998 1023zM576 319q-49 0-88.5-18.5T448 255q0-26 25.5-45t70.5-19q48 0 60 4t36 28q4 5 9 14t10 13.5t13 4.5q14 0 24.5-9.5T704 223q-12-49-36.5-68.5T576 127q0-17-.5-25.5t-3.5-19t-10-15t-18-4.5t-18 5t-10 16t-3.5 19.5t-.5 23.5q-71 9-99.5 34.5T384 255t52.5 98T576 383q49 0 88.5 19t39.5 45t-25.5 45t-70.5 19q-48 0-60-4t-36-28q-4-4-9-13t-10-14t-13-5q-14 0-24.5 10t-7.5 22q12 50 36.5 69.5T576 575q0 18 .5 26t3.5 18.5t9.5 15t18 4.5t18.5-5t10-16t3.5-19t.5-24q71-8 99.5-33.5T768 447q0-67-52.5-97.5T576 319zM173 767l-44 224q-3 13-14 22.5t-25 9.5H26q-13 0-20.5-9.5T1 991l159-803l115 579H173zm500 64l-32 160q-3 13-14 22.5t-24 9.5h-28l-37-159l7-33h128z" />
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- {% comment %} Sales graph {% endcomment %} -->
    <div class="my-4">
      {% include 'superuser/graph.html' with data=leads_won %}
    </div>

    {% if callback %}
    <div class="card my-3">
      <div class="card-header pb-0 p-3">
        <div class="d-flex justify-content-between mx-2">
          <h6 class="mb-2">Todays callbacks by employees</h6>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table align-items-center">
          <tbody>
            {% for i in callback %}
              <tr>
                <td class="w-30">
                  <div class="d-flex px-2 py-1 align-items-center">
                    <div class="ms-4">
                      <p class="text-xs font-weight-bold mb-0">Employee:</p>
                      <h6 class="text-sm mb-0 text-capitalize">{{ i.duty__emp__user__name }}</h6>
                    </div>
                  </div>
                </td>
                <td class="w-30">
                  <div class="d-flex px-2 py-1 align-items-center">
                    <div class="ms-4">
                      <p class="text-xs font-weight-bold mb-0">Callbacks:</p>
                      <h6 class="text-sm mb-0 text-capitalize">{{ i.count }}</h6>
                    </div>
                  </div>
                </td>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endif %}

    <div class="card">
      <div class="card-header pb-0 p-3">
        <div class="d-flex justify-content-between mx-2">
          <h6 class="mb-2">Sales by employees</h6>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table align-items-center">
          <tbody>
            {% for i in emp_sales %}
              <tr>
                <td class="w-30">
                  <div class="d-flex px-2 py-1 align-items-center">
                    <div class="ms-4">
                      <p class="text-xs font-weight-bold mb-0">Employee:</p>
                      {% if i.employee__user__name %}
                        <h6 class="text-sm mb-0 text-capitalize">{{ i.employee__user__name }}</h6>
                      {% else %}
                      -           
                      {% endif %}
                    </div>
                  </div>
                </td>
                <td>
                  <div class="text-center">
                    <p class="text-xs font-weight-bold mb-0">Sales:</p>
                    <h6 class="text-sm mb-0">{{ i.count }}</h6>
                  </div>
                </td>
                <td>
                  <div class="text-center">
                    <p class="text-xs font-weight-bold mb-0">Value:</p>
                    <h6 class="text-sm mb-0">₹ {{ i.total_sales }}</h6>
                  </div>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}
